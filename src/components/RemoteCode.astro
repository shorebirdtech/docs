---
import { Code } from 'starlight-theme-nova/components';
import { z } from 'astro/zod';

interface Props {
  title: string;
  url: string;
}

const propsSchema = z.object({
  title: z.string(),
  url: z.string(),
});

const { url, title } = propsSchema.parse(Astro.props);

const segments = url.split('.');
const lang = segments[segments.length - 1] as any;
const response = await fetch(url);
const code = await response.text();
---

<Code code={code} lang={lang} title={title} />
